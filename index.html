<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coin Price Expectation</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container mt-5">
      <div class="row">
        <div id="left-side" class="col-md-6">
          <h1 class="event-card-title text-center mb-5">
            ìƒŒë“œë±…í¬ì™€ í•¨ê»˜ ë¹„íŠ¸ì½”ì¸ ê°€ê²©ì„ ë§ì¶°ë³´ì! ğŸ¤–
          </h1>
          <p class="event-card-description text-center mb-5">
            "ìƒˆë¡­ê²Œ ì‹œì‘ë˜ëŠ” 'ì½”ì¸ ì˜ˆì¸¡ì™•' ì´ë²¤íŠ¸ì— ì´ˆëŒ€í•©ë‹ˆë‹¤! í•œ ë²ˆì˜ ì˜ˆì¸¡ìœ¼ë¡œ
            ë¹„íŠ¸ì½”ì¸ì˜ ë¯¸ë˜ë¥¼ ë§Œë“¤ì–´ ë³´ì„¸ìš”. ë‹¹ì‹ ì´ ì˜ˆì¸¡í•œ ë‚ ì˜ ì½”ì¸ ê°€ê²©ì´ ê°€ì¥
            ê°€ê¹ë‹¤ë©´, ë¹„íŠ¸ì½”ì¸ì„ ì„ ë¬¼ë¡œ ë“œë¦½ë‹ˆë‹¤. ë‹¨ìˆœí•œ ì´ë²¤íŠ¸ê°€ ì•„ë‹Œ, ë‹¹ì‹ ì˜
            í†µì°°ë ¥ê³¼ ì˜ˆì¸¡ ëŠ¥ë ¥ì„ í‚¤ìš¸ ìˆ˜ ìˆëŠ” ê¸°íšŒì…ë‹ˆë‹¤. ì§€ê¸ˆ ë°”ë¡œ ì°¸ì—¬í•˜ì„¸ìš”,
            ì´ ë†€ë¼ìš´ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!"
          </p>
          <div class="tradingview-widget-container">
            <div id="tradingview_91d31"></div>
          </div>
        </div>
        <div id="right-side" class="col-md-6">
          <div class="mt-5">
            <h2 class="text-center mb-3">í˜„ì¬ê¹Œì§€ ì°¸ì—¬ í˜„í™©</h2>
            <div class="card-field row">
              <div class="col-md-4">
                <h5 class="card-title">ìˆœìœ„</h5>
              </div>
              <div class="col-md-4">
                <h5 class="card-title">ì˜ˆìƒ ê°€ê²©</h5>
              </div>
              <div class="col-md-4">
                <h5 class="card-title">íœ´ëŒ€í° ë²ˆí˜¸</h5>
              </div>
            </div>
            <div id="current-status"></div>
          </div>
          <form
            action="https://script.google.com/macros/s/AKfycbwpm21kjEFxjCoGLr91PouK4YUlnpudbGnBvsvMWQq3J-7KjAeP-82J2VkCwcy0btNl/exec?function=doPost"
            method="post"
          >
            <div class="form-group">
              <label for="coin-name">ì´ë¦„</label>
              <input
                type="text"
                class="form-control"
                id="coin-name"
                placeholder="ì˜ˆìƒ ê°€ê²©"
              />
            </div>
            <div class="form-group">
              <label for="coin-price">ì½”ì¸ ê°€ê²©</label>
              <input
                type="number"
                class="form-control"
                id="coin-price"
                placeholder="ì½”ì¸ ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”..."
              />
            </div>
            <div class="form-group">
              <label for="coin-expectation">íœ´ëŒ€í° ë²ˆí˜¸</label>
              <input
                type="number"
                class="form-control"
                id="coin-expectation"
                placeholder="íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
              />
            </div>
            <button type="submit" class="btn btn-primary">ì œì¶œ</button>
          </form>
        </div>
      </div>
    </div>
    <!-- jQuery íŒŒì¼ -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© JS íŒŒì¼ -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
      // jQuery
      $("form").submit(function (event) {
        event.preventDefault();
        const coinName = $("#coin-name").val();
        const coinPrice = $("#coin-price").val();
        const coinExpectation = $("#coin-expectation").val();
        $("#result-coin-name").text(coinName);
        $("#result-coin-price").text(coinPrice);
        $("#result-coin-expectation").text(coinExpectation);
      });
    </script>
    <script
      type="text/javascript"
      src="https://s3.tradingview.com/tv.js"
    ></script>
    <script type="text/javascript">
      let main = document.querySelector("#left-side");
      let width = main.offsetWidth - 20;
      let height = main.offsetHeight - 20;

      new TradingView.widget({
        width: width,
        height: height,
        symbol: "BINANCE:BTCUSDT",
        interval: "5",
        timezone: "Etc/UTC",
        theme: "dark",
        style: "1",
        locale: "en",
        toolbar_bg: "#f1f3f6",
        enable_publishing: false,
        allow_symbol_change: true,
        container_id: "tradingview_91d31",
      });
    </script>
    <script>
      $(document).ready(function () {
        const ajaxSettings = {
          url: "https://script.google.com/macros/s/AKfycbwpm21kjEFxjCoGLr91PouK4YUlnpudbGnBvsvMWQq3J-7KjAeP-82J2VkCwcy0btNl/exec",
          success: (data) => {
            const container = document.querySelector("#current-status");
            data.forEach((result) => {
              const card = `
              <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                    <p class="card-text" id="result-rank">${result.rank}</p>
                    </div>
                    <div class="col-md-4">
                    <p class="card-text" id="result-rank">${result.price}</p>
                    </div>
                    <div class="col-md-4">
                    <p class="card-text" id="result-rank">${result.phone}</p>
                    </div>
                    </div>
                </div>
                </div>`;

              container.insertAdjacentHTML("beforeend", card);
            });
          },
          error: () => {
            alert("ì¶”ì²œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ì— ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
          },
        };

        $.ajax({ ...ajaxSettings, method: "GET", data: { function: "doGet" } });
      });

      function updateCards(data) {
        console.log(data);
      }
    </script>
  </body>
</html>
